(()=>{"use strict";class t{constructor(t){this.parentEl=t,this.onSubmit=this.onSubmit.bind(this)}static get markup(){return'    \n        <form data-widget="cards-form-widget">\n        <label for="cards-input"></label>\n        <input id="cards-input" data-id="cards-input" type="text" placeholder="credit card number">\n            <button class="submit">Click to Validate</button>\n    </form>\n    '}static get selector(){return"form"}static get inputSelector(){return"input"}static get submitSelector(){return".submit"}bindToDom(){this.parentEl.innerHTML=t.markup,this.element=this.parentEl.querySelector(t.selector),this.submit=this.parentEl.querySelector(t.submitSelector),this.input=this.parentEl.querySelector(t.inputSelector),this.element.addEventListener("submit",this.onSubmit)}onSubmit(t){if(t.preventDefault(),!0!==function(t){const s=t.replace(/\D/g,"");let i=0,e=!1;for(let t=s.length-1;t>=0;t-=1){let a=parseInt(s.charAt(t),10);e&&(a*=2,a>9&&(a-=9)),i+=a,e=!e}return i%10==0}(this.input.value))throw new Error("Неправильно указан номер карты");!function(t){let s=document.querySelectorAll(".Card");s=Array.from(s);const i=Number(t[0]+t[1]),e=Number(t.slice(0,3)),a=Number(t.slice(0,4)),r=Number(t.slice(0,6)),n=Number(t.length);if("2"===t[0]&&n<20&&n>15)return s.forEach((t=>{!0!==t.classList.contains("MIR")&&t.classList.add("inactive"),!0===t.classList.contains("MIR")&&t.classList.remove("inactive")})),!0;if("4"===t[0]&&(13===n||16===n||19===n))return s.forEach((t=>{!0!==t.classList.contains("Visa")&&t.classList.add("inactive"),!0===t.classList.contains("Visa")&&t.classList.remove("inactive")})),!0;if((36===i||54===i||e>299&&e<306)&&(14===n||16===n))return s.forEach((t=>{!0!==t.classList.contains("DinersClub")&&t.classList.add("inactive"),!0===t.classList.contains("DinersClub")&&t.classList.remove("inactive")})),!0;if((34===i||37===i)&&15===n)return s.forEach((t=>{!0!==t.classList.contains("AmericanExpress")&&t.classList.add("inactive"),!0===t.classList.contains("AmericanExpress")&&t.classList.remove("inactive")})),!0;if((65===i||e>643&&e<650||6011===a||r>622125&&r<622926)&&16===n)return s.forEach((t=>{!0!==t.classList.contains("Discover")&&t.classList.add("inactive"),!0===t.classList.contains("Discover")&&t.classList.remove("inactive")})),!0;if(a>3527&&a<3590&&n>15&&n<20)return s.forEach((t=>{!0!==t.classList.contains("JCB")&&t.classList.add("inactive"),!0===t.classList.contains("JCB")&&t.classList.remove("inactive")})),!0;if((i>50&&i<59||r>222099&&i<272100)&&16===n)return s.forEach((t=>{!0!==t.classList.contains("MasterCard")&&t.classList.add("inactive"),!0===t.classList.contains("MasterCard")&&t.classList.remove("inactive")})),!0;throw s.forEach((t=>{t.classList.remove("inactive")})),new Error("Неизвестная платежная система")}(this.input.value)}}const s=document.querySelector(".container");new t(s).bindToDom()})();
//# sourceMappingURL=main.js.map