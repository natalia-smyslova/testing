{"version":3,"file":"main.js","mappings":"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","sources":["webpack://webpack5/./src/js/widget.js","webpack://webpack5/./src/js/Moon.js","webpack://webpack5/./src/js/validators.js","webpack://webpack5/./src/js/app.js"],"sourcesContent":["import Moon from './Moon';\n\nimport validateCardType from './validators';\n\nexport default class CardWidget {\n  constructor(parentEl) {\n    this.parentEl = parentEl;\n\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  static get markup() {\n    return `    \n        <form data-widget=\"cards-form-widget\">\n        <label for=\"cards-input\"></label>\n        <input id=\"cards-input\" data-id=\"cards-input\" type=\"text\" placeholder=\"credit card number\">\n            <button class=\"submit\">Click to Validate</button>\n    </form>\n    `;\n  }\n\n  static get selector() {\n    return 'form';\n  }\n\n  static get inputSelector() {\n    return 'input';\n  }\n\n  static get submitSelector() {\n    return '.submit';\n  }\n\n  bindToDom() {\n    this.parentEl.innerHTML = CardWidget.markup;\n\n    this.element = this.parentEl.querySelector(CardWidget.selector);\n\n    this.submit = this.parentEl.querySelector(CardWidget.submitSelector);\n\n    this.input = this.parentEl.querySelector(CardWidget.inputSelector);\n\n    this.element.addEventListener('submit', this.onSubmit);\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n\n    const moonValue = Moon(this.input.value);\n\n    if (moonValue === true) {\n      validateCardType(this.input.value);\n    } else {\n      throw new Error('Неправильно указан номер карты');\n    }\n  }\n}\n","export default function Moon(param) {\n  const value = param.replace(/\\D/g, '');\n\n  let nCheck = 0;\n  let bEven = false;\n\n  for (let n = value.length - 1; n >= 0; n -= 1) {\n    let nDigit = parseInt(value.charAt(n), 10);\n\n    if (bEven) {\n      nDigit *= 2;\n      if (nDigit > 9) {\n        nDigit -= 9;\n      }\n    }\n\n    nCheck += nDigit;\n    bEven = !bEven;\n  }\n\n  return (nCheck % 10) === 0;\n}\n","export default function validateCardType(cardNumber) {\n  let cards = document.querySelectorAll('.Card');\n  cards = Array.from(cards);\n\n  const firstS = Number(cardNumber[0] + cardNumber[1]);\n  const firstThreeS = Number(cardNumber.slice(0, 3));\n  const firstFourS = Number(cardNumber.slice(0, 4));\n  const firstSixS = Number(cardNumber.slice(0, 6));\n  const length = Number(cardNumber.length);\n  // console.log(typeof length);\n\n  // console.log(firstSixSymbols);\n  // console.log(firstFourSymbols);\n  // console.log(firstSymbols);\n  // console.log(cardNumber.length);\n\n  if (cardNumber[0] === '2' && (length < 20 && length > 15)) {\n    cards.forEach((card) => {\n      if (card.classList.contains('MIR') !== true) {\n        card.classList.add('inactive');\n      }\n      if (card.classList.contains('MIR') === true) {\n        card.classList.remove('inactive');\n      }\n    });\n\n    // console.log(\"MIR\");\n    return true;\n  }\n\n  if (cardNumber[0] === '4' && (length === 13 || length === 16 || length === 19)) {\n    cards.forEach((card) => {\n      if (card.classList.contains('Visa') !== true) {\n        card.classList.add('inactive');\n      }\n      if (card.classList.contains('Visa') === true) {\n        card.classList.remove('inactive');\n      }\n    });\n    // console.log(\"Visa\");\n    return true;\n  }\n  if ((\n    firstS === 36\n        || firstS === 54\n        || (firstThreeS > 299 && firstThreeS < 306))\n        && (length === 14 || length === 16)) {\n    cards.forEach((card) => {\n      if (card.classList.contains('DinersClub') !== true) {\n        card.classList.add('inactive');\n      }\n      if (card.classList.contains('DinersClub') === true) {\n        card.classList.remove('inactive');\n      }\n    });\n\n    // console.log(\"DinersClub\");\n\n    return true;\n  }\n  if ((firstS === 34 || firstS === 37) && length === 15) {\n    cards.forEach((card) => {\n      if (card.classList.contains('AmericanExpress') !== true) {\n        card.classList.add('inactive');\n      }\n      if (card.classList.contains('AmericanExpress') === true) {\n        card.classList.remove('inactive');\n      }\n    });\n\n    // console.log(\"American Express\");\n    return true;\n  }\n  if (\n    ((firstS === 65)\n        || (firstThreeS > 643 && firstThreeS < 650)\n        || (firstFourS === 6011)\n        || (firstSixS > 622125 && firstSixS < 622926))\n        && length === 16) {\n    cards.forEach((card) => {\n      if (card.classList.contains('Discover') !== true) {\n        card.classList.add('inactive');\n      }\n\n      // Найти нужную карточку и выключить у нее класс\n      if (card.classList.contains('Discover') === true) {\n        card.classList.remove('inactive');\n      }\n    });\n\n    // console.log(\"Discover\");\n    return true;\n  }\n  if ((firstFourS > 3527 && firstFourS < 3590) && (length > 15 && length < 20)) {\n    cards.forEach((card) => {\n      if (card.classList.contains('JCB') !== true) {\n        card.classList.add('inactive');\n      }\n      if (card.classList.contains('JCB') === true) {\n        card.classList.remove('inactive');\n      }\n    });\n    // console.log(\"JCB\");\n    return true;\n  }\n  if (((firstS > 50 && firstS < 59) || (firstSixS > 222099 && firstS < 272100)) && length === 16) {\n    cards.forEach((card) => {\n      if (card.classList.contains('MasterCard') !== true) {\n        card.classList.add('inactive');\n      }\n      if (card.classList.contains('MasterCard') === true) {\n        card.classList.remove('inactive');\n      }\n    });\n\n    // console.log(\"MasterCard\");\n    return true;\n  }\n\n  cards.forEach((card) => {\n    card.classList.remove('inactive');\n  });\n\n  throw new Error('Неизвестная платежная система');\n}\n\n// let card = 376851808100095;\n// console.log(validateCardType(card));\n","// TODO: write code here\n\nimport CardWidget from './widget';\n\nconst container = document.querySelector('.container');\n\nconst form = new CardWidget(container);\n\nform.bindToDom();\n"],"names":["CardWidget","constructor","parentEl","this","onSubmit","bind","markup","selector","inputSelector","submitSelector","bindToDom","innerHTML","element","querySelector","submit","input","addEventListener","e","preventDefault","param","value","replace","nCheck","bEven","n","length","nDigit","parseInt","charAt","Moon","Error","cardNumber","cards","document","querySelectorAll","Array","from","firstS","Number","firstThreeS","slice","firstFourS","firstSixS","forEach","card","classList","contains","add","remove","validateCardType","container"],"sourceRoot":""}